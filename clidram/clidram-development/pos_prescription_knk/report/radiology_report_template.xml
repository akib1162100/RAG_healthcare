<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<template id="external_layout_standard_radiology">
		<div t-attf-class="header o_company_#{company.id}_layout" t-att-style="report_header_style">
			<div class="row mb4">
				<div class="col-7 text-end">
					<!--<img t-if="company.logo" t-att-src="image_data_uri(company.logo)" style="max-height: 100px;" alt="Logo"/>-->
				</div>
				<!--<div class="vertical-line" style="width: 1px; background-color: #000; height: 80px; display: inline-block; margin: 0 10px;"/>-->
				<div class="col-5 text-center">
					<img t-if="company.ctm_logo" t-att-src="image_data_uri(company.ctm_logo)" style="max-height: 80px;" alt="Logo-Kothari"/>
				</div>
			</div>
		</div>
		<div t-attf-class="article o_report_layout_standard o_company_#{company.id}_layout {{  'o_report_layout_background' if company.layout_background in ['Geometric', 'Custom']  else  '' }}" t-attf-style="background-image: url({{ 'data:image/png;base64,%s' % company.layout_background_image.decode('utf-8') if company.layout_background_image and company.layout_background == 'Custom' else '/base/static/img/bg_background_template.jpg' if company.layout_background == 'Geometric' else ''}});" t-att-data-oe-model="o and o._name" t-att-data-oe-id="o and o.id" t-att-data-oe-lang="o and o.env.context.get('lang')">
			<div class="pt">
			</div>
			<t t-out="0"/>
		</div>
		<div t-attf-class="footer o_standard_footer">
			<p t-esc="o.company_id.company_note" class="text-muted" style="font-size:10px;"/>
			<img t-if="company.company_footer" t-att-src="image_data_uri(company.company_footer)" style="height: 150px;" alt="Company-Footer"/>
			<!-- <div style="border-top: 1px solid #ccc; font-size:14px;">
				<div class="row d-flex justify-content-between">
				  <div class="col-6">
					  <p style="margin: 5px 0;">
						  <span style="margin-right: 5px;"><i class="fa fa-globe" aria-hidden="true"/></span><t t-esc="company.website"/>
					  </p>
					  <p style="margin: 5px 0;">
						  <span style="margin-right: 5px;"><i class="fa fa-at" aria-hidden="true"/></span> <t t-esc="company.email"/>
					  </p>
				  </div>
				  <div class="col-6">
					  <p style="margin: 5px 0;">
						  <span style="margin-right: 5px;"><i class="fa fa-phone" aria-hidden="true"/></span><t t-esc="company.phone"/> | <t t-esc="company.mobile"/>
					  </p>
					  <p style="margin: 5px 0;">
						  <span style="margin-right: 5px;"><i class="fa fa-map-marker" aria-hidden="true"/></span><t t-esc="company.street"/> <t t-esc="company.city"/> <t t-esc="company.zip"/>
					  </p>
							</div>
				</div>
			</div> -->
		</div>
	</template>
	<template id="external_layout_ctm_radiology">
		<t t-if="not o" t-set="o" t-value="doc" />
		<t t-if="not company">
			<t t-if="company_id">
				<t t-set="company" t-value="company_id" />
			</t>
			<t t-elif="o and 'company_id' in o and o.company_id.sudo()">
				<t t-set="company" t-value="o.company_id.sudo()" />
			</t>
			<t t-else="else">
				<t t-set="company" t-value="res_company" />
			</t>
		</t>
		<t t-call="pos_prescription_knk.external_layout_standard_radiology">
			<t t-out="0" />
		</t>
	</template>
	<data>
		<template id="report_radiology_order_document">
			<t t-call="web.html_container">
				<t t-foreach="docs" t-as="o">
					<t t-call="pos_prescription_knk.external_layout_ctm_radiology">
						<t t-set="o" t-value="o.with_context(lang=o.patient_id.lang)"/>
						<div class="page mt32" style="font-size:12px;">
							<table class="table table-bordered">
								<thead>
									<tr>
										<th t-if="o.patient_id"><b>NAME</b></th>
										<th t-if="o.patient_id"><span><t t-esc="o.patient_id.name"/></span></th>

										<th t-if="o.patient_age"><b>AGE</b></th>
										<th t-if="o.patient_age"><span><t t-esc="o.patient_age"/></span></th>

										<th t-if="o.patient_id.gender"><b>SEX</b></th>
										<th t-if="o.patient_id.gender"><span><t t-esc="o.patient_id.gender"/></span></th>
									</tr>
								</thead>
							</table>

							<table class="table table-bordered" style="margin-bottom:16px;">
								<thead>
									<tr>
										<th t-if="o.physician_id"><b>REFFERED BY</b></th>
										<th t-if="o.physician_id"><span><t t-esc="o.physician_id.name"/></span></th>
										<th t-if="o.date"><b>DATE</b></th>
										<th t-if="o.date"><span><t t-esc="o.date"/></span></th>
									</tr>
								</thead>
							</table>
							<h5 class="text-center"><t t-esc="o.procedure_product_id.name"/></h5>
							<div t-if="o.name or o.invoice_id.kmc_num">
							   <p t-if="o.name">Request No.: <t t-esc="o.name"/></p>
							   <p t-if="o.invoice_id.kmc_num">KMC No.: <t t-esc="o.invoice_id.kmc_num"/></p>
							</div>
							<!-- <p t-if="o.technique"><b><u>TEst: </u></b><t t-row="o.demo_html"/>2</p><br/> -->
							<p t-if="o.technique"><b><u>Technique: </u></b><t t-esc="o.technique"/></p><br/>
							<p t-if="o.findings"><b><u>Findings: </u></b><br/><t t-esc="o.findings"/></p><br/>
							<p t-if="o.impression"><b><u>IMPRESSION: </u></b><t t-esc="o.impression"/></p><br/>

							<div t-if="not o.procedure_physician_id.physician_signature" class="oe_structure"/>
							<div t-else="" class="mt32 ml64 mr4" name="signature">
							<div class="offset-8">
								<img t-att-src="image_data_uri(o.procedure_physician_id.physician_signature)" style="max-height: 4cm; max-width: 8cm;"/>
							</div>
							<div t-if="o.procedure_physician_id.name" class="offset-8 text-center">
								<p t-field="o.procedure_physician_id.name">John Doe</p>
							</div>
							<div t-if="o.procedure_physician_id.designation" class="offset-8 text-center">
								<p t-field="o.procedure_physician_id.designation">MBBS, BMS</p>
							</div>
						</div>
						</div>
					</t>
				</t>
			</t>
		</template>

		<record id="paperformat_radiology" model="report.paperformat">
			<field name="name">Custom Paper Format Radiology</field>
			<field name="default" eval="False" />
			<field name="format">A4</field>
			<field name="orientation">Portrait</field>
			<field name="margin_top">35</field>
			<field name="margin_bottom">40</field>
			<field name="margin_left">5</field>
			<field name="margin_right">5</field>
			<field name="header_line" eval="False" />
			<field name="header_spacing">30</field>
		</record>

		<record id="action_radiology_report" model="ir.actions.report">
			<field name="name">Radiology</field>
			<field name="model">radiology.request</field>
			<field name="report_type">qweb-pdf</field>
			<field name="report_name">pos_prescription_knk.report_radiology_order_document</field>
			<field name="report_file">pos_prescription_knk.report_radiology_order_document</field>
			<field name="print_report_name">'Radiology Order: %s' % (object.name)</field>
			<field name="binding_model_id" ref="pos_prescription_knk.model_radiology_request" />
			<field name="binding_type">report</field>
			<field name="paperformat_id" ref="pos_prescription_knk.paperformat_radiology" />
		</record>


		<template id="report_radiology_order_document_without_header">
			<t t-call="web.html_container">
				<t t-foreach="docs" t-as="o">
					<t t-set="o" t-value="o.with_context(lang=o.patient_id.lang)" />
					<t t-call="web.basic_layout">
					<div class="page mt32">
						<table class="table table-bordered">
							<thead>
								<tr>
									<th t-if="o.patient_id"><b>NAME</b></th>
									<th t-if="o.patient_id"><span><t t-esc="o.patient_id.name"/></span></th>

									<th t-if="o.patient_age"><b>AGE</b></th>
									<th t-if="o.patient_age"><span><t t-esc="o.patient_age"/></span></th>

									<th t-if="o.patient_id.gender"><b>SEX</b></th>
									<th t-if="o.patient_id.gender"><span><t t-esc="o.patient_id.gender"/></span></th>
								</tr>
							</thead>
						</table>

						<table class="table table-bordered">
							<thead>
								<tr>
									<th t-if="o.physician_id"><b>REFFERED BY</b></th>
									<th t-if="o.physician_id"><span><t t-esc="o.physician_id.name"/></span></th>
									<th t-if="o.date"><b>DATE</b></th>
									<th t-if="o.date"><span><t t-esc="o.date"/></span></th>
								</tr>
							</thead>
						</table>
						<h3 class="text-center"><t t-esc="o.procedure_product_id.name"/></h3>
						<p t-if="o.technique"><b><u>Technique: </u></b><t t-esc="o.technique" /></p><br/>
						<p t-if="o.findings"><b><u>Findings: </u></b><br/><t t-esc="o.findings" /></p><br/>
						<p t-if="o.impression"><b><u>IMPRESSION: </u></b><t t-esc="o.impression" /></p><br/>

						<div t-if="not o.procedure_physician_id.physician_signature" class="oe_structure"></div>
						<div t-else="" class="mt32 ml64 mr4" name="signature">
							<div class="offset-8">
								<img t-att-src="image_data_uri(o.procedure_physician_id.physician_signature)" style="max-height: 4cm; max-width: 8cm;"/>
							</div>
							<div t-if="o.procedure_physician_id.name" class="offset-8 text-center">
								<p t-field="o.procedure_physician_id.name">John Doe</p>
							</div>
							<div t-if="o.procedure_physician_id.designation" class="offset-8 text-center">
								<p t-field="o.procedure_physician_id.designation">MBBS, BMS</p>
							</div>
						</div>
					</div>
				</t>
				</t>
			</t>
		</template>

		<record id="action_radiology_report_without_header" model="ir.actions.report">
			<field name="name">Radiology Basic</field>
			<field name="model">radiology.request</field>
			<field name="report_type">qweb-pdf</field>
			<field name="report_name">pos_prescription_knk.report_radiology_order_document_without_header</field>
			<field name="report_file">pos_prescription_knk.report_radiology_order_document_without_header</field>
			<field name="print_report_name">'Radiology Order: %s' % (object.name)</field>
			<field name="binding_model_id" ref="pos_prescription_knk.model_radiology_request" />
			<field name="binding_type">report</field>
			<field name="paperformat_id" ref="pos_prescription_knk.paperformat_radiology" />
		</record>
	</data>
</odoo>


